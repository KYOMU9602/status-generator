<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8"> 
    
    <meta name="viewport" content="width=device-width", initial-scale="1.0">

    <title>狀態生成器</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            padding: 20px; 
            font-size: 20px;
            text-align: center;
        }
        input[type="text"] { 
            width: 70%; 
            padding: 20px; 
            margin: 10px auto; 
            font-size: 18px; 
            text-align: center;
            border: 4px solid #ccc;
            border-radius: 20px;
            box-sizing: border-box;
        }
        button { 
            background-color: #1f1e33 ;/* 深紫 */
            color: white; 
            padding: 20px 0; 
            border: none; 
            cursor: pointer; 
            width: 70%; 
            font-size: 20px; 
            margin-top: 30px; 
            border-radius: 20px;
        }
        #output { 
            margin-top: 20px;
            margin: 25px auto;
            width: 70%; 
            padding: 10px; 
            background-color: #e9ecef; 
            border-radius: 15px; 
            text-align: center; 
            font-size: 20px;
        }
        .success { color: green; font-weight: bold; }
        .error { color: red; }
        </style>
</head>
<body>
    <h1>輸入狀態</h1>

    <form onsubmit="generateAndCopy(); return false;">
    
    <input type="text" id="statusInput" placeholder="例如：正在專注寫程式" autofocus>
          
    <button type="submit">
         生成並複製訊息
    </button>

    </form>

    <div id="output">
        <p id="currentStatus">訊息將顯示在這裡</p>
    </div>

    <script>
        //核心函式
        function generateAndCopy(){
            //設定input變數
            const statusInput = document.getElementById('statusInput');
            const statusText = statusInput.value.trim(); // .valut讀取文字，.trim() 移除前後空白

            if (statusText === ""){
                alert("請輸入狀態！");// 如果未輸入，彈出提示
                return;// 停止
            }

            //取得現在時間
            const now = new Date();
            //處理時間格式
            const options = {hour: '2-digit' , minute: '2-digit' , hour12: true};
            const currentTime = now.toLocaleTimeString('zh-TW' , options)
                                    .replace('AM' , '上午').replace('PM' , '下午');

            const messageToCopy = `/關閉通知 "${currentTime}" "${statusText}"`;

            if (navigator.clipboard && navigator.clipboard.writeText) {
                navigator.clipboard.writeText(messageToCopy).then(() => {
                    document.getElementById('currentStatus').innerText = 
                        `複製成功。 \n複製內容:${messageToCopy}`;
                }).catch(err => {
                    document.getElementById('currentStatus').innerText = 
                        `複製失敗。 \n請手動複製內容:${messageToCopy}`;
                });
            } else {
                document.getElementById('currentStatus').innerText = 
                    `複製失敗。請使用較新瀏覽器開啟此網站。\n請手動複製內容:${messageToCopy}`;                
            }

        }
    </script>
</body>
</html>
